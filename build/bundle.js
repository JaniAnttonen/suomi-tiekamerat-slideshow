var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function l(e){return document.createTextNode(e)}function d(){return l(" ")}function f(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function m(e,t){t=""+t,e.data!==t&&(e.data=t)}let p;function h(e){p=e}function v(){if(!p)throw new Error("Function called outside component initialization");return p}const y=[],b=[],g=[],w=[],S=Promise.resolve();let P=!1;function O(e){g.push(e)}function _(){const e=new Set;do{for(;y.length;){const e=y.shift();h(e),I(e.$$)}for(;b.length;)b.pop()();for(let t=0;t<g.length;t+=1){const n=g[t];e.has(n)||(n(),e.add(n))}g.length=0}while(y.length);for(;w.length;)w.pop()();P=!1}function I(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const R=new Set;function T(e,t){e&&e.i&&(R.delete(e),e.i(t))}function N(e,n,i){const{fragment:a,on_mount:s,on_destroy:c,after_update:u}=e.$$;a&&a.m(n,i),O(()=>{const n=s.map(t).filter(o);c?c.push(...n):r(n),e.$$.on_mount=[]}),u.forEach(O)}function V(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function x(e,t){-1===e.$$.dirty[0]&&(y.push(e),P||(P=!0,S.then(_)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function k(t,o,i,a,s,c,u=[-1]){const l=p;h(t);const d=o.props||{},f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:u};let m=!1;f.ctx=i?i(t,d,(e,n,r=n)=>(f.ctx&&s(f.ctx[e],f.ctx[e]=r)&&(f.bound[e]&&f.bound[e](r),m&&x(t,e)),n)):[],f.update(),m=!0,r(f.before_update),f.fragment=!!a&&a(f.ctx),o.target&&(o.hydrate?f.fragment&&f.fragment.l(function(e){return Array.from(e.childNodes)}(o.target)):f.fragment&&f.fragment.c(),o.intro&&T(t.$$.fragment),N(t,o.target,o.anchor),_()),h(l)}class M{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const j=[];function A(e,t,n){const r=e.slice();return r[1]=t[n],r[14]=n,r}function E(e){let t,n,r;return{c(){t=u("img"),t.src!==(n=e[1].url)&&f(t,"src",n),f(t,"alt",r=e[1].url),f(t,"class","roadImage svelte-5eqntw")},m(e,n){s(e,t,n)},p(e,o){2&o&&t.src!==(n=e[1].url)&&f(t,"src",n),2&o&&r!==(r=e[1].url)&&f(t,"alt",r)},d(e){e&&c(t)}}}function C(t){let n,r,o,i,p,h,v,y,b=t[0].municipality+"",g=t[0].province+"",w=t[1],S=[];for(let e=0;e<w.length;e+=1)S[e]=E(A(t,w,e));return{c(){n=u("div");for(let e=0;e<S.length;e+=1)S[e].c();r=d(),o=u("div"),i=u("h1"),p=l(b),h=d(),v=u("span"),y=l(g),f(n,"class","slideShow svelte-5eqntw"),f(i,"class","svelte-5eqntw"),f(v,"class","svelte-5eqntw"),f(o,"class","currentLocation svelte-5eqntw")},m(e,t){s(e,n,t);for(let e=0;e<S.length;e+=1)S[e].m(n,null);s(e,r,t),s(e,o,t),a(o,i),a(i,p),a(o,h),a(o,v),a(v,y)},p(e,[t]){if(2&t){let r;for(w=e[1],r=0;r<w.length;r+=1){const o=A(e,w,r);S[r]?S[r].p(o,t):(S[r]=E(o),S[r].c(),S[r].m(n,null))}for(;r<S.length;r+=1)S[r].d(1);S.length=w.length}1&t&&b!==(b=e[0].municipality+"")&&m(p,b),1&t&&g!==(g=e[0].province+"")&&m(y,g)},i:e,o:e,d(e){e&&c(n),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(S,e),e&&c(r),e&&c(o)}}}function D(t,n,r){let o=[],a={};const s=[],c=function(t,n=e){let r;const o=[];function a(e){if(i(t,e)&&(t=e,r)){const e=!j.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),j.push(n,t)}if(e){for(let e=0;e<j.length;e+=2)j[e][0](j[e+1]);j.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(i,s=e){const c=[i,s];return o.push(c),1===o.length&&(r=n(a)||e),i(t),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}([]);let u=[],l={municipality:"",province:""};const d=e=>{try{return new Promise(t=>setTimeout(()=>t(),e))}catch(e){console.log(e.toString())}},f=e=>{e&&s.shift();const t=Math.floor(Math.random()*Math.floor(o.length));s.push(o[t]),c.set(s)};var m;m=async()=>{o=await(async()=>{const e=await fetch("https://tie.digitraffic.fi/api/v1/data/camera-data?lastUpdated=false");return(await e.json()).cameraStations.map(e=>e.cameraPresets.filter(e=>!e.presentationName||e.presentationName&&!e.presentationName.toLowerCase().includes("tien")).filter(e=>e.imageUrl).map(t=>({id:e.id,url:t.imageUrl}))).flat()})(),await(async()=>{const e=await fetch("https://tie.digitraffic.fi/api/v1/metadata/camera-stations?lastUpdated=false");(await e.json()).features.forEach(e=>a[e.properties.id]={municipality:e.properties.municipality,province:e.properties.province})})(),console.log(o);for(let e=0;e<3;e++)f(!1);(async()=>{for(;;)await d(2e4),f(!0)})()},v().$$.on_mount.push(m);const p=c.subscribe(e=>{r(1,u=e),e[0]&&r(0,l=a[e[0].id])});return function(e){v().$$.on_destroy.push(e)}(()=>p()),[l,u]}class $ extends M{constructor(e){super(),k(this,e,D,C,i,{})}}function L(t){let n,r;const o=new $({});return{c(){var e;n=u("main"),(e=o.$$.fragment)&&e.c(),f(n,"class","svelte-g944tl")},m(e,t){s(e,n,t),N(o,n,null),r=!0},p:e,i(e){r||(T(o.$$.fragment,e),r=!0)},o(e){!function(e,t,n,r){if(e&&e.o){if(R.has(e))return;R.add(e),(void 0).c.push(()=>{R.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}(o.$$.fragment,e),r=!1},d(e){e&&c(n),V(o)}}}function U(e){webOS.service.request("luna://com.palm.systemservice",{method:"clock/getTime",parameters:{},onSuccess(e){console.log("UTC:",e.utc)},onFailure(e){}});return[]}return window.webOS=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={};if("object"===("undefined"==typeof window?"undefined":r(window))&&window.PalmSystem)if(window.navigator.userAgent.indexOf("SmartWatch")>-1)o.watch=!0;else if(window.navigator.userAgent.indexOf("SmartTV")>-1||window.navigator.userAgent.indexOf("Large Screen")>-1)o.tv=!0;else{try{var i=JSON.parse(window.PalmSystem.deviceInfo||"{}");if(i.platformVersionMajor&&i.platformVersionMinor){var a=Number(i.platformVersionMajor),s=Number(i.platformVersionMinor);a<3||3===a&&s<=0?o.legacy=!0:o.open=!0}}catch(e){o.open=!0}window.Mojo=window.Mojo||{relaunch:function(){}},window.PalmSystem.stageReady&&window.PalmSystem.stageReady()}else o.unknown=!0;t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={},a=t.LS2Request=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.bridge=null,this.cancelled=!1,this.subscribe=!1}return o(e,[{key:"send",value:function(e){var t=e.service,n=void 0===t?"":t,o=e.method,a=void 0===o?"":o,s=e.parameters,c=void 0===s?{}:s,u=e.onSuccess,l=void 0===u?function(){}:u,d=e.onFailure,f=void 0===d?function(){}:d,m=e.onComplete,p=void 0===m?function(){}:m,h=e.subscribe,v=void 0!==h&&h;if(!window.PalmServiceBridge){var y={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1};return f(y),p(y),console.error("PalmServiceBridge is not found."),this}this.ts&&i[this.ts]&&delete i[this.ts];var b=r({},c);return this.subscribe=v,this.subscribe&&(b.subscribe=this.subscribe),b.subscribe&&(this.subscribe=b.subscribe),this.ts=Date.now(),i[this.ts]=this,this.bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,l,f,p),this.bridge.call(function(e){var t=e;return"/"!==t.slice(-1)&&(t+="/"),t}(n)+a,JSON.stringify(b)),this}},{key:"callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var o={};try{o=JSON.parse(r)}catch(e){o={errorCode:-1,errorText:r,returnValue:!1}}var i=o,a=i.errorCode,s=i.returnValue;void 0!==a||!1===s?(o.returnValue=!1,t(o)):(o.returnValue=!0,e(o)),n(o),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&i[this.ts]&&delete i[this.ts]}}]),e}(),s={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r({service:e},t);return(new a).send(n)}};t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=t.fetchAppId=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},o={};t.fetchAppInfo=function(e,t){if(0===Object.keys(o).length){var n=function(t,n){if(!t&&n)try{o=JSON.parse(n),e&&e(o)}catch(t){console.error("Unable to parse appinfo.json file for",r()),e&&e()}else e&&e()},i=new window.XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||0===i.status?n(null,i.responseText):n({status:404}))};try{i.open("GET",t||"appinfo.json",!0),i.send(null)}catch(e){n({status:404})}}else e&&e(o)},t.fetchAppRootPath=function(){var e=window.location.href;if("baseURI"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName("base");t.length>0&&(e=t[0].href)}var n=e.match(new RegExp(".*://[^#]*/"));return n?n[0]:""},t.platformBack=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i={};t.default=function(e){if(0===Object.keys(i).length){try{var t=JSON.parse(window.PalmSystem.deviceInfo);i.modelName=t.modelName,i.version=t.platformVersion,i.versionMajor=t.platformVersionMajor,i.versionMinor=t.platformVersionMinor,i.versionDot=t.platformVersionDot,i.sdkVersion=t.platformVersion,i.screenWidth=t.screenWidth,i.screenHeight=t.screenHeight}catch(e){i.modelName="webOS Device"}i.screenHeight=i.screenHeight||window.screen.height,i.screenWidth=i.screenWidth||window.screen.width,o.default.tv&&(new r.LS2Request).send({service:"luna://com.webos.service.tv.systemproperty",method:"getSystemInfo",parameters:{keys:["firmwareVersion","modelName","sdkVersion","UHD"]},onSuccess:function(t){if(i.modelName=t.modelName||i.modelName,i.sdkVersion=t.sdkVersion||i.sdkVersion,i.uhd="true"===t.UHD,t.firmwareVersion&&"0.0.0"!==t.firmwareVersion||(t.firmwareVersion=t.sdkVersion),t.firmwareVersion){i.version=t.firmwareVersion;for(var n=i.version.split("."),r=["versionMajor","versionMinor","versionDot"],o=0;o<r.length;o+=1)try{i[r[o]]=parseInt(n[o],10)}catch(e){i[r[o]]=n[o]}}e(i)},onFailure:function(){e(i)}})}else e(i)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={isShowing:function(){return!!PalmSystem&&(PalmSystem.isKeyboardVisible||!1)}};t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e={};if(window.PalmSystem){if(window.PalmSystem.country){var t=JSON.parse(window.PalmSystem.country);e.country=t.country,e.smartServiceCountry=t.smartServiceCountry}window.PalmSystem.timeZone&&(e.timezone=window.PalmSystem.timeZone)}return e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default="1.1.0"},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.systemInfo=t.service=t.platform=t.platformBack=t.libVersion=t.keyboard=t.fetchAppRootPath=t.fetchAppInfo=t.fetchAppId=t.deviceInfo=void 0;var o=n(2),i=r(n(1)),a=r(n(3)),s=r(n(4)),c=r(n(0)),u=r(n(5)),l=r(n(6));t.deviceInfo=a.default,t.fetchAppId=o.fetchAppId,t.fetchAppInfo=o.fetchAppInfo,t.fetchAppRootPath=o.fetchAppRootPath,t.keyboard=s.default,t.libVersion=l.default,t.platformBack=o.platformBack,t.platform=c.default,t.service=i.default,t.systemInfo=u.default}]),window.webOSDev=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={},a=t.LS2Request=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.bridge=null,this.cancelled=!1,this.subscribe=!1}return o(e,[{key:"send",value:function(e){var t=e.service,n=void 0===t?"":t,o=e.method,a=void 0===o?"":o,s=e.parameters,c=void 0===s?{}:s,u=e.onSuccess,l=void 0===u?function(){}:u,d=e.onFailure,f=void 0===d?function(){}:d,m=e.onComplete,p=void 0===m?function(){}:m,h=e.subscribe,v=void 0!==h&&h;if(!window.PalmServiceBridge){var y={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1};return f(y),p(y),console.error("PalmServiceBridge is not found."),this}this.ts&&i[this.ts]&&delete i[this.ts];var b=r({},c);return this.subscribe=v,this.subscribe&&(b.subscribe=this.subscribe),b.subscribe&&(this.subscribe=b.subscribe),this.ts=Date.now(),i[this.ts]=this,this.bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,l,f,p),this.bridge.call(function(e){var t=e;return"/"!==t.slice(-1)&&(t+="/"),t}(n)+a,JSON.stringify(b)),this}},{key:"callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var o={};try{o=JSON.parse(r)}catch(e){o={errorCode:-1,errorText:r,returnValue:!1}}var i=o,a=i.errorCode,s=i.returnValue;void 0!==a||!1===s?(o.returnValue=!1,t(o)):(o.returnValue=!0,e(o)),n(o),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&i[this.ts]&&delete i[this.ts]}}]),e}(),s={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r({service:e},t);return(new a).send(n)}};t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.drmAgent=t.DRM=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=n(0),s={NOT_ERROR:-1,CLIENT_NOT_LOADED:0,VENDOR_ERROR:500,API_NOT_SUPPORTED:501,WRONG_CLIENT_ID:502,KEY_NOT_FOUND:503,INVALID_PARAMS:504,UNSUPPORTED_DRM_TYPE:505,INVALID_KEY_FORMAT:506,INVALID_TIME_INFO:507,UNKNOWN_ERROR:599},c={PLAYREADY:"playready",WIDEVINE:"widevine"},u=0,l=1,d=2,f=3,m=function(e){var t=e.method,n=e.parameters,r=e.onComplete;(new a.LS2Request).send({service:"luna://com.webos.service.drm",onComplete:r,method:t,parameters:n})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};setTimeout((function(){return e(t)}),0)},h=function(e){return e.state===d&&""!==e.getClientId()},v=function(e,t){var n=t.errorCode,r=void 0===n?s.UNKNOWN_ERROR:n,o=t.errorText,i={errorCode:r,errorText:void 0===o?"Unknown error.":o};return e.setError(i),i},y=function(e){var t="",n="";switch(e){case c.PLAYREADY:t="application/vnd.ms-playready.initiator+xml",n="urn:dvb:casystemid:19219";break;case c.WIDEVINE:t="application/widevine+xml",n="urn:dvb:casystemid:19156"}return{msgType:t,drmSystemId:n}},b={errorCode:s.CLIENT_NOT_LOADED,errorText:"DRM client is not loaded."},g=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.clientId="",this.drmType=t,this.errorCode=s.NOT_ERROR,this.errorText="",this.state=u}return o(e,[{key:"getClientId",value:function(){return this.clientId}},{key:"getDrmType",value:function(){return this.drmType}},{key:"getErrorCode",value:function(){return this.errorCode}},{key:"getErrorText",value:function(){return this.errorText}},{key:"setError",value:function(e){var t=e.errorCode,n=e.errorText;this.errorCode=t,this.errorText=n}},{key:"isLoaded",value:function(e){var t=this,n=e.onSuccess,o=void 0===n?function(){}:n,a=e.onFailure,c=void 0===a?function(){}:a;m({method:"isLoaded",parameters:{appId:(0,i.fetchAppId)()},onComplete:function(e){if(!0===e.returnValue){if(t.clientId=e.clientId||"",t.state=e.loadStatus?d:u,!0===e.loadStatus&&e.drmType!==t.drmType)return c(v(t,{errorCode:s.UNKNOWN_ERROR,errorText:"DRM types of set and loaded are not matched."}));var n=r({},e);return delete n.returnValue,o(n)}return c(v(t,e))}})}},{key:"load",value:function(e){var t=this,n=e.onSuccess,r=void 0===n?function(){}:n,o=e.onFailure,a=void 0===o?function(){}:o;if(this.state!==l&&this.state!==d){var s={appId:(0,i.fetchAppId)(),drmType:this.drmType};this.state=l,m({method:"load",onComplete:function(e){return!0===e.returnValue?(t.clientId=e.clientId,t.state=d,r({clientId:t.clientId})):a(v(t,e))},parameters:s})}else p(r,{isLoaded:!0,clientId:this.clientId})}},{key:"unload",value:function(e){var t=this,n=e.onSuccess,r=void 0===n?function(){}:n,o=e.onFailure,i=void 0===o?function(){}:o;if(h(this)){var a={clientId:this.clientId};this.state=f,m({method:"unload",onComplete:function(e){return!0===e.returnValue?(t.clientId="",t.state=u,r()):i(v(t,e))},parameters:a})}else p(i,v(this,b))}},{key:"getRightsError",value:function(e){var t=this,n=e.onSuccess,o=void 0===n?function(){}:n,i=e.onFailure,a=void 0===i?function(){}:i;h(this)?m({method:"getRightsError",parameters:{clientId:this.clientId,subscribe:!0},onComplete:function(e){if(!0===e.returnValue){var n=r({},e);return delete n.returnValue,o(n)}return a(v(t,e))}}):p(a,v(this,b))}},{key:"sendDrmMessage",value:function(e){var t=this,n=e.msg,o=void 0===n?"":n,i=e.onSuccess,a=void 0===i?function(){}:i,s=e.onFailure,c=void 0===s?function(){}:s;if(h(this)){var u=y(this.drmType),l=r({clientId:this.clientId,msg:o},u);m({method:"sendDrmMessage",onComplete:function(e){if(!0===e.returnValue){var n=r({},e);return delete n.returnValue,a(n)}return c(v(t,e))},parameters:l})}else p(c,v(this,b))}}]),e}();t.DRM={Error:s,Type:c},t.drmAgent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e?null:new g(e)},t.default=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,o=e.onFailure,i=void 0===o?function(){}:o;-1!==navigator.userAgent.indexOf("Chrome")?(new r.LS2Request).send({service:"luna://com.webos.service.sm",method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onComplete:function(e){if(!0!==e.returnValue)i({errorCode:e.errorCode,errorText:e.errorText});else{var t=e.idList.filter((function(e){return"LGUDID"===e.idType}))[0].idValue;n({id:t})}}}):setTimeout((function(){return i({errorCode:"ERROR.000",errorText:"Not supported."})}),0)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.launchParams=t.launch=t.APP=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=t.APP={BROWSER:"APP_BROWSER"},a=function(e){var t=e.parameters,n=e.onSuccess,r=e.onFailure;(new o.LS2Request).send({service:"luna://com.webos.applicationManager",method:"launch",parameters:t,onComplete:function(e){var t=e.returnValue,o=e.errorCode,i=e.errorText;return!0===t?n():r({errorCode:o,errorText:i})}})};t.launch=function(e){var t=e.id,n=void 0===t?"":t,o=e.params,s=void 0===o?{}:o,c=e.onSuccess,u=void 0===c?function(){}:c,l=e.onFailure,d=void 0===l?function(){}:l,f=r({},{id:n,params:s});i.BROWSER===n&&(f.params.target=s.target||"",f.params.fullMode=!0,f.id="com.webos.app.browser"),a({parameters:f,onSuccess:u,onFailure:d})},t.launchParams=function(){var e={};if(window.PalmSystem&&""!==window.PalmSystem.launchParams)try{e=JSON.parse(window.PalmSystem.launchParams)}catch(e){console.error("JSON parsing error")}return e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=function(e){var t=e.service,n=e.subscribe,i=e.onSuccess,a=e.onFailure;(new o.LS2Request).send({service:t,method:"getStatus",parameters:{subscribe:n},onComplete:function(e){var t=r({},e);if(delete t.returnValue,!0===e.returnValue)return delete t.subscribe,void i(t);delete t.returnValue,a(t)}})},a={getStatus:function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,r=e.onFailure,o=void 0===r?function(){}:r,a=e.subscribe,s=void 0!==a&&a,c="webos.service";navigator.userAgent.indexOf("537.41")>-1&&(c="palm"),i({service:"luna://com."+c+".connectionmanager",subscribe:s,onSuccess:n,onFailure:o})}};t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=t.fetchAppId=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},o={};t.fetchAppInfo=function(e,t){if(0===Object.keys(o).length){var n=function(t,n){if(!t&&n)try{o=JSON.parse(n),e&&e(o)}catch(t){console.error("Unable to parse appinfo.json file for",r()),e&&e()}else e&&e()},i=new window.XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||0===i.status?n(null,i.responseText):n({status:404}))};try{i.open("GET",t||"appinfo.json",!0),i.send(null)}catch(e){n({status:404})}}else e&&e(o)},t.fetchAppRootPath=function(){var e=window.location.href;if("baseURI"in window.document)e=window.document.baseURI;else{var t=window.document.getElementsByTagName("base");t.length>0&&(e=t[0].href)}var n=e.match(new RegExp(".*://[^#]*/"));return n?n[0]:""},t.platformBack=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LGUDID=t.launchParams=t.launch=t.drmAgent=t.DRM=t.connection=t.APP=void 0;var o=n(3),i=n(1),a=r(n(4)),s=r(n(2));t.APP=o.APP,t.connection=a.default,t.DRM=i.DRM,t.drmAgent=i.drmAgent,t.launch=o.launch,t.launchParams=o.launchParams,t.LGUDID=s.default}]),new class extends M{constructor(e){super(),k(this,e,U,L,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
